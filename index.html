<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WATTxSecret â€” Encrypted Self-Destructing Messages</title>
  <meta name="description" content="Send encrypted self-destructing messages. No server, no tracking. Pure client-side AES-256-GCM encryption.">
  <link rel="icon" href="../assets/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div class="app">
    <header>
      <a href="index.html" class="logo-link">
        <div class="logo-wrap">
          <svg class="lightning-canvas" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <filter id="bolt-glow">
                <feGaussianBlur stdDeviation="2.5" result="blur"/>
                <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
              </filter>
            </defs>
            <g filter="url(#bolt-glow)">
              <polyline class="bolt bolt-l" points=""/>
              <polyline class="bolt bolt-r" points=""/>
            </g>
          </svg>
          <img src="../assets/logo.png" alt="WATTx Logo" class="logo" width="48" height="48">
        </div>
        <h1>WATT<span class="gold">x</span>Secret</h1>
      </a>
      <p class="tagline">End-to-end encrypted self-destructing messages</p>
    </header>

    <div id="httpsWarning" class="warning hidden">
      <span class="warning-icon">&#9888;</span>
      <span>For maximum security, use HTTPS. Your connection is not encrypted.</span>
    </div>

    <!-- Encrypt View -->
    <main id="encryptView" class="panel">
      <h2>Create A Self-Destructing Message</h2>
      <div class="form-container">
        <div class="textarea-wrapper">
          <textarea id="messageInput" maxlength="2000" placeholder="Secret text..." spellcheck="false"></textarea>
          <div class="char-counter"><span id="charCount">0</span> / 2000</div>
        </div>

        <div class="controls">
          <div class="slider-group">
            <label for="expirySlider">Days Before Expiration</label>
            <div class="slider-row">
              <input type="range" id="expirySlider" min="1" max="30" value="30">
              <span class="slider-value" id="expiryValue">30 Days</span>
            </div>
          </div>
          <div class="slider-group">
            <label for="viewsSlider">Views Before Destruction</label>
            <div class="slider-row">
              <input type="range" id="viewsSlider" min="1" max="10" value="1">
              <span class="slider-value" id="viewsValue">1 View</span>
            </div>
          </div>
        </div>

        <div class="actions">
          <div class="btn-row">
            <button id="encryptBtn" class="btn btn-primary" disabled>
              <span class="btn-icon">&#128274;</span> Encrypt Message
            </button>
            <button id="clearBtn" class="btn btn-secondary">
              <span class="btn-icon">&#128465;</span> Clear
            </button>
          </div>
          <div class="template-row">
            <label for="templateSelect">Template:</label>
            <select id="templateSelect">
              <option value="">No Template</option>
              <option value="credentials">Credentials</option>
              <option value="creditcard">Credit Card</option>
            </select>
          </div>
        </div>
      </div>

      <div id="result" class="result hidden">
        <h3>Your Secret Link</h3>
        <p class="result-info">Share this link. The recipient can decrypt the message by opening it.</p>
        <div class="link-row">
          <input id="secretLink" type="text" readonly>
          <button id="copyBtn" class="btn btn-primary btn-copy">Copy Link</button>
        </div>
        <p id="copyFeedback" class="copy-feedback hidden">Copied to clipboard!</p>
        <div class="expiry-info">
          <span id="expiryInfo"></span>
        </div>
      </div>
    </main>

    <!-- Decrypt View -->
    <main id="decryptView" class="panel hidden">
      <div id="decryptLoading" class="loading">
        <div class="spinner"></div>
        <p>Decrypting...</p>
      </div>

      <div id="decryptSuccess" class="hidden">
        <h2>Secret Message</h2>
        <div id="messageDisplay" class="message-display"></div>
        <p class="meta" id="messageMeta"></p>
        <button id="newSecretBtn" class="btn btn-primary">Create New Secret</button>
      </div>

      <div id="decryptError" class="hidden">
        <div class="error-icon">&#128683;</div>
        <h2 id="errorTitle">Error</h2>
        <p id="errorMessage" class="error-message"></p>
        <button id="newSecretErrorBtn" class="btn btn-primary">Create New Secret</button>
      </div>
    </main>

    <footer>
      <p>Powered by <a href="../">WATTx</a> &middot; AES-256-GCM Client-Side Encryption</p>
      <p class="footer-note">No data is sent to any server. Everything happens in your browser.</p>
    </footer>
  </div>

  <script src="js/secret.js"></script>
</body>
</html>
